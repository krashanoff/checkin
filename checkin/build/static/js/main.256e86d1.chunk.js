(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(69)},41:function(e,t,a){},43:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),l=a(2),i=a(3),u=a(5),o=a(4),h=a(6),d=a(11),m=a(12),f=(a(41),a(16)),p=a.n(f),E=a(19),b=a(15),v=(a(43),a(17)),g=a.n(v),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).includesForNames=function(e,t){for(var a=0;a<e.length;a++)if(e[a][1]===t)return a;return-1},a.state={value:"",data:[],lastNamesAll:[],lastNamesVisible:[],redirectWith:[],searchConducted:"",noResults:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(){var e=Object(E.a)(p.a.mark(function e(t){var a,n,r,s=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,this.setState({value:a}),!(a.length<3)){e.next=5;break}return this.setState({lastNamesAll:[],lastNamesVisible:[],searchConducted:"false"}),e.abrupt("return");case 5:if(n=[],"false"!==this.state.searchConducted||3!==a.length){e.next=21;break}return e.prev=7,e.next=10,g.a.get("/api/search/"+a);case 10:r=e.sent,this.setState({data:r.data}),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(7),alert("Failed retrieving data from the server. Is the server running?"),e.abrupt("return");case 18:n=[],Array.from(this.state.data).forEach(function(e){var t=s.includesForNames(n,e.accountLast);-1===t?n.push([[e.id],e.accountLast]):n[t][0].push(e.id)}),this.setState({lastNamesAll:n,searchConducted:"true"});case 21:n=[],Array.from(this.state.lastNamesAll).forEach(function(e){e[1].toUpperCase().includes(a.toUpperCase())&&n.push(e)}),n.sort(function(e,t){return e[1]>t[1]}),this.setState({lastNamesVisible:n}),0===this.state.lastNamesVisible.length&&"true"===this.state.searchConducted?this.setState({noResults:"true"}):this.setState({noResults:"false"});case 26:case"end":return e.stop()}},e,this,[[7,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(E.a)(p.a.mark(function e(t){var a,n,r,s=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.value.length>1&&0===this.state.lastNamesVisible.length)){e.next=16;break}return e.prev=2,e.next=5,g.a.get("/api/search/"+this.state.value);case 5:a=e.sent,this.setState({data:a.data}),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),alert("Failed retrieving data from the server. Is the server running?"),e.abrupt("return");case 13:n=[],Array.from(this.state.data).forEach(function(e){var t=s.includesForNames(n,e.accountLast);-1===t?n.push([[e.id],e.accountLast]):n[t][0].push(e.id)}),this.setState({lastNamesVisible:n});case 16:r=[],Array.from(this.state.lastNamesVisible).forEach(function(e){e[0].forEach(function(e){r.push(e)})}),this.setState({redirectWith:r});case 19:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(0!==this.state.redirectWith.length)return r.a.createElement(m.a,{to:{pathname:"/results",state:{ids:this.state.redirectWith,data:this.state.data}}});var t=[];return"true"===this.state.noResults?t.push(r.a.createElement("div",{className:"suggestion noResults",key:"0"},"No results found.")):Array.from(this.state.lastNamesVisible).forEach(function(a){t.push(r.a.createElement(d.b,{to:{pathname:"/results",state:{ids:a[0],data:e.state.data}},className:"suggestion",key:a[1]},a[1]))}),r.a.createElement("div",{id:"start"},r.a.createElement("form",{id:"suggestions",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Please enter a last name...",value:this.state.value,onChange:this.handleChange}),r.a.createElement("div",{id:"names"},t)))}}]),t}(r.a.Component),N=(a(65),function(e){function t(e){var a;Object(l.a)(this,t);var n=(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).props.location.state;return"undefined"!==typeof n&&"undefined"!==typeof n.ids&&"undefined"!==typeof n.data||(window.location.href="/404"),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this;if(0===this.props.location.state.ids.length)return r.a.createElement("p",null,"No members were found matching your query. Please ",r.a.createElement(d.b,{to:"/"},"return to the start"),".");if(1===this.props.location.state.ids.length)return Array.from(this.props.location.state.data).forEach(function(a){a.id===t.props.location.state.ids[0]&&(e=a)}),r.a.createElement(m.a,{to:{pathname:"/checkin",state:{id:this.props.location.state.ids[0],contact:e}}});var a=[];return Array.from(this.props.location.state.ids).forEach(function(e){Array.from(t.props.location.state.data).forEach(function(t){t.id===e&&a.push(r.a.createElement("tr",{className:"contactEntry",key:e},r.a.createElement("td",null,r.a.createElement(d.b,{to:{pathname:"/checkin",state:{id:e,contact:t}}},t.accountLast)),r.a.createElement("td",null,t.accountFirst),r.a.createElement("td",null,t.altFirst)))})}),r.a.createElement("table",{id:"results"},r.a.createElement("caption",null,"Which family?"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Spouse Name"))),r.a.createElement("tbody",null,a))}}]),t}(r.a.Component)),O=(a(66),a(17));function k(e){return r.a.createElement("tr",{className:"entry",id:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:e.name}),r.a.createElement("span",{className:"checkmark"}))))}var j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){if("minus"===e.target.className){if(0===a.state.value)return;a.setState({value:a.state.value-1})}else a.setState({value:a.state.value+1})},"undefined"===typeof a.props.name&&console.log("ERROR: COUNTER COMPONENT REQUIRES A NAME PARAMETER."),a.state={value:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"counter"},r.a.createElement("button",{type:"button",className:"minus",onClick:this.handleChange},"-"),r.a.createElement("button",{name:this.props.name,type:"button",className:"count"},this.state.value),r.a.createElement("button",{type:"button",className:"plus",onClick:this.handleChange},"+"))}}]),t}(r.a.Component),C=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),"true"!==a.state.submissionInProgress){var t={};t.id=a.state.id,t.lastName=a.state.contact.accountLast,t.parents=[],t.caregivers=[],t.children=[];var n=document.getElementsByClassName("entry");Array.from(n).forEach(function(e){if(!0===e.lastChild.firstChild.firstChild.checked){var a=String(e.id),n=e.firstChild.innerHTML;a.includes("parent")?t.parents.push(n):"thirdAdult"===a?t.thirdAdult=n:a.includes("caregiver")?t.caregivers.push(n):a.includes("child")&&t.children.push(n)}});var r=document.getElementsByClassName("count");Array.from(r).forEach(function(e){"adultGuests"===e.name?t.adultGuests=Number(e.innerHTML):t.childGuests=Number(e.innerHTML)}),0!==t.parents.length||0!==t.caregivers.length||0!==t.children.length?(a.setState({submissionInProgress:"true"}),O.post("/api/log",{data:t}).then(function(){window.location.href="/"}).catch(function(){a.setState({submissionInProgress:"false"}),alert("ERROR: Logging could not be completed properly. Please wait a few seconds and try again.\nIf this message persists, then contact the administrator.")})):alert("ERROR: No adults or children are selected")}};var n=a.props.location.state;return"undefined"!==typeof n&&"undefined"!==typeof n.id&&"undefined"!==typeof n.contact||(window.location.href="/404"),a.state={id:n.id,contact:n.contact,submissionInProgress:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[],t=[],a=[],n=0,s=0,c=0,l=0;return e.push(r.a.createElement(k,{name:String(this.state.contact.accountFirst+" "+this.state.contact.accountLast),id:String("parent"+s),key:n})),n++,s++,"undefined"!==typeof this.state.contact.altFirst&&"undefined"!==typeof this.state.contact.altLast&&(e.push(r.a.createElement(k,{name:String(this.state.contact.altFirst+" "+this.state.contact.altLast),id:String("parent"+s),key:n})),n++,s++),"undefined"!==typeof this.state.contact.thirdAdult&&(e.push(r.a.createElement(k,{name:String(this.state.contact.thirdAdult),id:"thirdAdult",key:n})),n++),Array.from(this.state.contact.caregivers).forEach(function(e){t.push(r.a.createElement(k,{name:e,id:String("caregiver"+c),key:n})),n++,c++}),Array.from(this.state.contact.children).forEach(function(e){a.push(r.a.createElement(k,{name:e,id:String("child"+l),key:n})),n++,l++}),r.a.createElement("div",{id:"checkin"},r.a.createElement("table",{className:"namesTable",id:"parents"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Adults"))),r.a.createElement("tbody",null,e,t)),r.a.createElement("table",{className:"namesTable",id:"children"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Children"))),r.a.createElement("tbody",null,a.length>0?a:r.a.createElement("tr",null,r.a.createElement("td",null,"This account has no children associated.")))),r.a.createElement("table",{className:"namesTable",id:"guests"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Adult Guests"),r.a.createElement("td",null,r.a.createElement(j,{name:"adultGuests"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Child Guests"),r.a.createElement("td",null,r.a.createElement(j,{name:"childGuests"}))))),r.a.createElement("input",{onClick:this.handleSubmit,type:"button",value:"Check-In",id:"checkinButton"}))}}]),t}(r.a.Component),S=(a(67),function(e){function t(e){var a;return Object(l.a)(this,t),"undefined"===typeof(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).props.data&&console.log("NO DATA PROVIDED"),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"userInfo"},r.a.createElement("p",null,"Family Name: ",this.props.data.lastName))}}]),t}(r.a.Component)),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value})},a.state={value:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"admin"},r.a.createElement("div",{id:"masterTable"},r.a.createElement("input",{type:"text",name:"lastName",onChange:this.handleChange,value:this.state.value,placeholder:"Search for a last name..."}),r.a.createElement("table",{id:"masterTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Spouse/Partner"))),r.a.createElement("tbody",null,[]))),3===this.state.value.length?r.a.createElement(S,{uid:"2"}):r.a.createElement(S,{uid:"null"}))}}]),t}(r.a.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"404"},r.a.createElement("h1",null,"MISSING PAGE"))}}]),t}(r.a.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{id:"nav"},r.a.createElement(d.b,{className:"navLink",to:"/"},"SHHA Check-In System"),r.a.createElement("div",{id:"links"},r.a.createElement("a",{class:"navLink",href:"/admin/logout"},"Logout"))),r.a.createElement("div",{id:"view"},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:y}),r.a.createElement(m.b,{path:"/results",component:N}),r.a.createElement(m.b,{path:"/checkin",component:C}),r.a.createElement(m.b,{path:"/admin",component:A}),r.a.createElement(m.b,{exact:!0,path:"*",component:w}))))}}]),t}(r.a.Component);a(68),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.256e86d1.chunk.js.map